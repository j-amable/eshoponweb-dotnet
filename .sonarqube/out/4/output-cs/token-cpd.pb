é
g/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Services/EmailSender.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Services, 4
;4 5
public 
class 
EmailSender 
: 
IEmailSender '
{		 
public

 

Task

 
SendEmailAsync

 
(

 
string

 %
email

& +
,

+ ,
string

- 3
subject

4 ;
,

; <
string

= C
message

D K
)

K L
{ 
return 
Task 
. 
CompletedTask !
;! "
} 
} √
h/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Logging/LoggerAdapter.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Logging, 3
;3 4
public 
class 
LoggerAdapter 
< 
T 
> 
: 

IAppLogger  *
<* +
T+ ,
>, -
{ 
private 
readonly 
ILogger 
< 
T 
> 
_logger  '
;' (
public		 

LoggerAdapter		 
(		 
ILoggerFactory		 '
loggerFactory		( 5
)		5 6
{

 
_logger 
= 
loggerFactory 
.  
CreateLogger  ,
<, -
T- .
>. /
(/ 0
)0 1
;1 2
} 
public 

void 

LogWarning 
( 
string !
message" )
,) *
params+ 1
object2 8
[8 9
]9 :
args; ?
)? @
{ 
_logger 
. 

LogWarning 
( 
message "
," #
args$ (
)( )
;) *
} 
public 

void 
LogInformation 
( 
string %
message& -
,- .
params/ 5
object6 <
[< =
]= >
args? C
)C D
{ 
_logger 
. 
LogInformation 
( 
message &
,& '
args( ,
), -
;- .
} 
} Ï
q/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Identity/UserNotFoundException.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Identity, 4
;4 5
public 
class !
UserNotFoundException "
:# $
	Exception% .
{ 
public 
!
UserNotFoundException  
(  !
string! '
userName( 0
)0 1
:2 3
base4 8
(8 9
$"9 ;
$str; X
{X Y
userNameY a
}a b
"b c
)c d
{ 
}		 
}

 À∆
ä/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Identity/Migrations/20201202111612_InitialIdentityModel.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Identity, 4
.4 5

Migrations5 ?
;? @
public 
partial 
class  
InitialIdentityModel )
:* +
	Migration, 5
{ 
	protected 
override 
void 
Up 
( 
MigrationBuilder /
migrationBuilder0 @
)@ A
{		 
migrationBuilder

 
.

 
CreateTable

 $
(

$ %
name 
: 
$str 
,  
columns 
: 
table 
=> 
new !
{ 
Id 
= 
table 
. 
Column !
<! "
string" (
>( )
() *
type* .
:. /
$str0 ?
,? @
nullableA I
:I J
falseK P
)P Q
,Q R
Name 
= 
table 
. 
Column #
<# $
string$ *
>* +
(+ ,
type, 0
:0 1
$str2 A
,A B
	maxLengthC L
:L M
$numN Q
,Q R
nullableS [
:[ \
true] a
)a b
,b c
NormalizedName 
=  
table! &
.& '
Column' -
<- .
string. 4
>4 5
(5 6
type6 :
:: ;
$str< K
,K L
	maxLengthM V
:V W
$numX [
,[ \
nullable] e
:e f
trueg k
)k l
,l m
ConcurrencyStamp  
=! "
table# (
.( )
Column) /
</ 0
string0 6
>6 7
(7 8
type8 <
:< =
$str> M
,M N
nullableO W
:W X
trueY ]
)] ^
} 
, 
constraints 
: 
table 
=> !
{ 
table 
. 

PrimaryKey  
(  !
$str! 1
,1 2
x3 4
=>5 7
x8 9
.9 :
Id: <
)< =
;= >
} 
) 
; 
migrationBuilder 
. 
CreateTable $
($ %
name 
: 
$str 
,  
columns 
: 
table 
=> 
new !
{ 
Id 
= 
table 
. 
Column !
<! "
string" (
>( )
() *
type* .
:. /
$str0 ?
,? @
nullableA I
:I J
falseK P
)P Q
,Q R
UserName 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 E
,E F
	maxLengthG P
:P Q
$numR U
,U V
nullableW _
:_ `
truea e
)e f
,f g
NormalizedUserName "
=# $
table% *
.* +
Column+ 1
<1 2
string2 8
>8 9
(9 :
type: >
:> ?
$str@ O
,O P
	maxLengthQ Z
:Z [
$num\ _
,_ `
nullablea i
:i j
truek o
)o p
,p q
Email 
= 
table 
. 
Column $
<$ %
string% +
>+ ,
(, -
type- 1
:1 2
$str3 B
,B C
	maxLengthD M
:M N
$numO R
,R S
nullableT \
:\ ]
true^ b
)b c
,c d
NormalizedEmail   
=    !
table  " '
.  ' (
Column  ( .
<  . /
string  / 5
>  5 6
(  6 7
type  7 ;
:  ; <
$str  = L
,  L M
	maxLength  N W
:  W X
$num  Y \
,  \ ]
nullable  ^ f
:  f g
true  h l
)  l m
,  m n
EmailConfirmed!! 
=!!  
table!!! &
.!!& '
Column!!' -
<!!- .
bool!!. 2
>!!2 3
(!!3 4
type!!4 8
:!!8 9
$str!!: ?
,!!? @
nullable!!A I
:!!I J
false!!K P
)!!P Q
,!!Q R
PasswordHash"" 
="" 
table"" $
.""$ %
Column""% +
<""+ ,
string"", 2
>""2 3
(""3 4
type""4 8
:""8 9
$str"": I
,""I J
nullable""K S
:""S T
true""U Y
)""Y Z
,""Z [
SecurityStamp## 
=## 
table##  %
.##% &
Column##& ,
<##, -
string##- 3
>##3 4
(##4 5
type##5 9
:##9 :
$str##; J
,##J K
nullable##L T
:##T U
true##V Z
)##Z [
,##[ \
ConcurrencyStamp$$  
=$$! "
table$$# (
.$$( )
Column$$) /
<$$/ 0
string$$0 6
>$$6 7
($$7 8
type$$8 <
:$$< =
$str$$> M
,$$M N
nullable$$O W
:$$W X
true$$Y ]
)$$] ^
,$$^ _
PhoneNumber%% 
=%% 
table%% #
.%%# $
Column%%$ *
<%%* +
string%%+ 1
>%%1 2
(%%2 3
type%%3 7
:%%7 8
$str%%9 H
,%%H I
nullable%%J R
:%%R S
true%%T X
)%%X Y
,%%Y Z 
PhoneNumberConfirmed&& $
=&&% &
table&&' ,
.&&, -
Column&&- 3
<&&3 4
bool&&4 8
>&&8 9
(&&9 :
type&&: >
:&&> ?
$str&&@ E
,&&E F
nullable&&G O
:&&O P
false&&Q V
)&&V W
,&&W X
TwoFactorEnabled''  
=''! "
table''# (
.''( )
Column'') /
<''/ 0
bool''0 4
>''4 5
(''5 6
type''6 :
:'': ;
$str''< A
,''A B
nullable''C K
:''K L
false''M R
)''R S
,''S T

LockoutEnd(( 
=(( 
table(( "
.((" #
Column((# )
<(() *
DateTimeOffset((* 8
>((8 9
(((9 :
type((: >
:((> ?
$str((@ P
,((P Q
nullable((R Z
:((Z [
true((\ `
)((` a
,((a b
LockoutEnabled)) 
=))  
table))! &
.))& '
Column))' -
<))- .
bool)). 2
>))2 3
())3 4
type))4 8
:))8 9
$str)): ?
,))? @
nullable))A I
:))I J
false))K P
)))P Q
,))Q R
AccessFailedCount** !
=**" #
table**$ )
.**) *
Column*** 0
<**0 1
int**1 4
>**4 5
(**5 6
type**6 :
:**: ;
$str**< A
,**A B
nullable**C K
:**K L
false**M R
)**R S
}++ 
,++ 
constraints,, 
:,, 
table,, 
=>,, !
{-- 
table.. 
... 

PrimaryKey..  
(..  !
$str..! 1
,..1 2
x..3 4
=>..5 7
x..8 9
...9 :
Id..: <
)..< =
;..= >
}// 
)// 
;// 
migrationBuilder11 
.11 
CreateTable11 $
(11$ %
name22 
:22 
$str22 $
,22$ %
columns33 
:33 
table33 
=>33 
new33 !
{44 
Id55 
=55 
table55 
.55 
Column55 !
<55! "
int55" %
>55% &
(55& '
type55' +
:55+ ,
$str55- 2
,552 3
nullable554 <
:55< =
false55> C
)55C D
.66 

Annotation66 
(66  
$str66  4
,664 5
$str666 <
)66< =
,66= >
RoleId77 
=77 
table77 
.77 
Column77 %
<77% &
string77& ,
>77, -
(77- .
type77. 2
:772 3
$str774 C
,77C D
nullable77E M
:77M N
false77O T
)77T U
,77U V
	ClaimType88 
=88 
table88 !
.88! "
Column88" (
<88( )
string88) /
>88/ 0
(880 1
type881 5
:885 6
$str887 F
,88F G
nullable88H P
:88P Q
true88R V
)88V W
,88W X

ClaimValue99 
=99 
table99 "
.99" #
Column99# )
<99) *
string99* 0
>990 1
(991 2
type992 6
:996 7
$str998 G
,99G H
nullable99I Q
:99Q R
true99S W
)99W X
}:: 
,:: 
constraints;; 
:;; 
table;; 
=>;; !
{<< 
table== 
.== 

PrimaryKey==  
(==  !
$str==! 6
,==6 7
x==8 9
=>==: <
x=== >
.==> ?
Id==? A
)==A B
;==B C
table>> 
.>> 

ForeignKey>>  
(>>  !
name?? 
:?? 
$str?? B
,??B C
column@@ 
:@@ 
x@@ 
=>@@  
x@@! "
.@@" #
RoleId@@# )
,@@) *
principalTableAA "
:AA" #
$strAA$ 1
,AA1 2
principalColumnBB #
:BB# $
$strBB% )
,BB) *
onDeleteCC 
:CC 
ReferentialActionCC /
.CC/ 0
CascadeCC0 7
)CC7 8
;CC8 9
}DD 
)DD 
;DD 
migrationBuilderFF 
.FF 
CreateTableFF $
(FF$ %
nameGG 
:GG 
$strGG $
,GG$ %
columnsHH 
:HH 
tableHH 
=>HH 
newHH !
{II 
IdJJ 
=JJ 
tableJJ 
.JJ 
ColumnJJ !
<JJ! "
intJJ" %
>JJ% &
(JJ& '
typeJJ' +
:JJ+ ,
$strJJ- 2
,JJ2 3
nullableJJ4 <
:JJ< =
falseJJ> C
)JJC D
.KK 

AnnotationKK 
(KK  
$strKK  4
,KK4 5
$strKK6 <
)KK< =
,KK= >
UserIdLL 
=LL 
tableLL 
.LL 
ColumnLL %
<LL% &
stringLL& ,
>LL, -
(LL- .
typeLL. 2
:LL2 3
$strLL4 C
,LLC D
nullableLLE M
:LLM N
falseLLO T
)LLT U
,LLU V
	ClaimTypeMM 
=MM 
tableMM !
.MM! "
ColumnMM" (
<MM( )
stringMM) /
>MM/ 0
(MM0 1
typeMM1 5
:MM5 6
$strMM7 F
,MMF G
nullableMMH P
:MMP Q
trueMMR V
)MMV W
,MMW X

ClaimValueNN 
=NN 
tableNN "
.NN" #
ColumnNN# )
<NN) *
stringNN* 0
>NN0 1
(NN1 2
typeNN2 6
:NN6 7
$strNN8 G
,NNG H
nullableNNI Q
:NNQ R
trueNNS W
)NNW X
}OO 
,OO 
constraintsPP 
:PP 
tablePP 
=>PP !
{QQ 
tableRR 
.RR 

PrimaryKeyRR  
(RR  !
$strRR! 6
,RR6 7
xRR8 9
=>RR: <
xRR= >
.RR> ?
IdRR? A
)RRA B
;RRB C
tableSS 
.SS 

ForeignKeySS  
(SS  !
nameTT 
:TT 
$strTT B
,TTB C
columnUU 
:UU 
xUU 
=>UU  
xUU! "
.UU" #
UserIdUU# )
,UU) *
principalTableVV "
:VV" #
$strVV$ 1
,VV1 2
principalColumnWW #
:WW# $
$strWW% )
,WW) *
onDeleteXX 
:XX 
ReferentialActionXX /
.XX/ 0
CascadeXX0 7
)XX7 8
;XX8 9
}YY 
)YY 
;YY 
migrationBuilder[[ 
.[[ 
CreateTable[[ $
([[$ %
name\\ 
:\\ 
$str\\ $
,\\$ %
columns]] 
:]] 
table]] 
=>]] 
new]] !
{^^ 
LoginProvider__ 
=__ 
table__  %
.__% &
Column__& ,
<__, -
string__- 3
>__3 4
(__4 5
type__5 9
:__9 :
$str__; J
,__J K
nullable__L T
:__T U
false__V [
)__[ \
,__\ ]
ProviderKey`` 
=`` 
table`` #
.``# $
Column``$ *
<``* +
string``+ 1
>``1 2
(``2 3
type``3 7
:``7 8
$str``9 H
,``H I
nullable``J R
:``R S
false``T Y
)``Y Z
,``Z [
ProviderDisplayNameaa #
=aa$ %
tableaa& +
.aa+ ,
Columnaa, 2
<aa2 3
stringaa3 9
>aa9 :
(aa: ;
typeaa; ?
:aa? @
$straaA P
,aaP Q
nullableaaR Z
:aaZ [
trueaa\ `
)aa` a
,aaa b
UserIdbb 
=bb 
tablebb 
.bb 
Columnbb %
<bb% &
stringbb& ,
>bb, -
(bb- .
typebb. 2
:bb2 3
$strbb4 C
,bbC D
nullablebbE M
:bbM N
falsebbO T
)bbT U
}cc 
,cc 
constraintsdd 
:dd 
tabledd 
=>dd !
{ee 
tableff 
.ff 

PrimaryKeyff  
(ff  !
$strff! 6
,ff6 7
xff8 9
=>ff: <
newff= @
{ffA B
xffC D
.ffD E
LoginProviderffE R
,ffR S
xffT U
.ffU V
ProviderKeyffV a
}ffb c
)ffc d
;ffd e
tablegg 
.gg 

ForeignKeygg  
(gg  !
namehh 
:hh 
$strhh B
,hhB C
columnii 
:ii 
xii 
=>ii  
xii! "
.ii" #
UserIdii# )
,ii) *
principalTablejj "
:jj" #
$strjj$ 1
,jj1 2
principalColumnkk #
:kk# $
$strkk% )
,kk) *
onDeletell 
:ll 
ReferentialActionll /
.ll/ 0
Cascadell0 7
)ll7 8
;ll8 9
}mm 
)mm 
;mm 
migrationBuilderoo 
.oo 
CreateTableoo $
(oo$ %
namepp 
:pp 
$strpp #
,pp# $
columnsqq 
:qq 
tableqq 
=>qq 
newqq !
{rr 
UserIdss 
=ss 
tabless 
.ss 
Columnss %
<ss% &
stringss& ,
>ss, -
(ss- .
typess. 2
:ss2 3
$strss4 C
,ssC D
nullablessE M
:ssM N
falsessO T
)ssT U
,ssU V
RoleIdtt 
=tt 
tablett 
.tt 
Columntt %
<tt% &
stringtt& ,
>tt, -
(tt- .
typett. 2
:tt2 3
$strtt4 C
,ttC D
nullablettE M
:ttM N
falsettO T
)ttT U
}uu 
,uu 
constraintsvv 
:vv 
tablevv 
=>vv !
{ww 
tablexx 
.xx 

PrimaryKeyxx  
(xx  !
$strxx! 5
,xx5 6
xxx7 8
=>xx9 ;
newxx< ?
{xx@ A
xxxB C
.xxC D
UserIdxxD J
,xxJ K
xxxL M
.xxM N
RoleIdxxN T
}xxU V
)xxV W
;xxW X
tableyy 
.yy 

ForeignKeyyy  
(yy  !
namezz 
:zz 
$strzz A
,zzA B
column{{ 
:{{ 
x{{ 
=>{{  
x{{! "
.{{" #
RoleId{{# )
,{{) *
principalTable|| "
:||" #
$str||$ 1
,||1 2
principalColumn}} #
:}}# $
$str}}% )
,}}) *
onDelete~~ 
:~~ 
ReferentialAction~~ /
.~~/ 0
Cascade~~0 7
)~~7 8
;~~8 9
table 
. 

ForeignKey  
(  !
name
ÄÄ 
:
ÄÄ 
$str
ÄÄ A
,
ÄÄA B
column
ÅÅ 
:
ÅÅ 
x
ÅÅ 
=>
ÅÅ  
x
ÅÅ! "
.
ÅÅ" #
UserId
ÅÅ# )
,
ÅÅ) *
principalTable
ÇÇ "
:
ÇÇ" #
$str
ÇÇ$ 1
,
ÇÇ1 2
principalColumn
ÉÉ #
:
ÉÉ# $
$str
ÉÉ% )
,
ÉÉ) *
onDelete
ÑÑ 
:
ÑÑ 
ReferentialAction
ÑÑ /
.
ÑÑ/ 0
Cascade
ÑÑ0 7
)
ÑÑ7 8
;
ÑÑ8 9
}
ÖÖ 
)
ÖÖ 
;
ÖÖ 
migrationBuilder
áá 
.
áá 
CreateTable
áá $
(
áá$ %
name
àà 
:
àà 
$str
àà $
,
àà$ %
columns
ââ 
:
ââ 
table
ââ 
=>
ââ 
new
ââ !
{
ää 
UserId
ãã 
=
ãã 
table
ãã 
.
ãã 
Column
ãã %
<
ãã% &
string
ãã& ,
>
ãã, -
(
ãã- .
type
ãã. 2
:
ãã2 3
$str
ãã4 C
,
ããC D
nullable
ããE M
:
ããM N
false
ããO T
)
ããT U
,
ããU V
LoginProvider
åå 
=
åå 
table
åå  %
.
åå% &
Column
åå& ,
<
åå, -
string
åå- 3
>
åå3 4
(
åå4 5
type
åå5 9
:
åå9 :
$str
åå; J
,
ååJ K
nullable
ååL T
:
ååT U
false
ååV [
)
åå[ \
,
åå\ ]
Name
çç 
=
çç 
table
çç 
.
çç 
Column
çç #
<
çç# $
string
çç$ *
>
çç* +
(
çç+ ,
type
çç, 0
:
çç0 1
$str
çç2 A
,
ççA B
nullable
ççC K
:
ççK L
false
ççM R
)
ççR S
,
ççS T
Value
éé 
=
éé 
table
éé 
.
éé 
Column
éé $
<
éé$ %
string
éé% +
>
éé+ ,
(
éé, -
type
éé- 1
:
éé1 2
$str
éé3 B
,
ééB C
nullable
ééD L
:
ééL M
true
ééN R
)
ééR S
}
èè 
,
èè 
constraints
êê 
:
êê 
table
êê 
=>
êê !
{
ëë 
table
íí 
.
íí 

PrimaryKey
íí  
(
íí  !
$str
íí! 6
,
íí6 7
x
íí8 9
=>
íí: <
new
íí= @
{
ííA B
x
ííC D
.
ííD E
UserId
ííE K
,
ííK L
x
ííM N
.
ííN O
LoginProvider
ííO \
,
íí\ ]
x
íí^ _
.
íí_ `
Name
íí` d
}
ííe f
)
ííf g
;
ííg h
table
ìì 
.
ìì 

ForeignKey
ìì  
(
ìì  !
name
îî 
:
îî 
$str
îî B
,
îîB C
column
ïï 
:
ïï 
x
ïï 
=>
ïï  
x
ïï! "
.
ïï" #
UserId
ïï# )
,
ïï) *
principalTable
ññ "
:
ññ" #
$str
ññ$ 1
,
ññ1 2
principalColumn
óó #
:
óó# $
$str
óó% )
,
óó) *
onDelete
òò 
:
òò 
ReferentialAction
òò /
.
òò/ 0
Cascade
òò0 7
)
òò7 8
;
òò8 9
}
ôô 
)
ôô 
;
ôô 
migrationBuilder
õõ 
.
õõ 
CreateIndex
õõ $
(
õõ$ %
name
úú 
:
úú 
$str
úú .
,
úú. /
table
ùù 
:
ùù 
$str
ùù %
,
ùù% &
column
ûû 
:
ûû 
$str
ûû 
)
ûû 
;
ûû 
migrationBuilder
†† 
.
†† 
CreateIndex
†† $
(
††$ %
name
°° 
:
°° 
$str
°° !
,
°°! "
table
¢¢ 
:
¢¢ 
$str
¢¢  
,
¢¢  !
column
££ 
:
££ 
$str
££ $
,
££$ %
unique
§§ 
:
§§ 
true
§§ 
,
§§ 
filter
•• 
:
•• 
$str
•• 2
)
••2 3
;
••3 4
migrationBuilder
ßß 
.
ßß 
CreateIndex
ßß $
(
ßß$ %
name
®® 
:
®® 
$str
®® .
,
®®. /
table
©© 
:
©© 
$str
©© %
,
©©% &
column
™™ 
:
™™ 
$str
™™ 
)
™™ 
;
™™ 
migrationBuilder
¨¨ 
.
¨¨ 
CreateIndex
¨¨ $
(
¨¨$ %
name
≠≠ 
:
≠≠ 
$str
≠≠ .
,
≠≠. /
table
ÆÆ 
:
ÆÆ 
$str
ÆÆ %
,
ÆÆ% &
column
ØØ 
:
ØØ 
$str
ØØ 
)
ØØ 
;
ØØ 
migrationBuilder
±± 
.
±± 
CreateIndex
±± $
(
±±$ %
name
≤≤ 
:
≤≤ 
$str
≤≤ -
,
≤≤- .
table
≥≥ 
:
≥≥ 
$str
≥≥ $
,
≥≥$ %
column
¥¥ 
:
¥¥ 
$str
¥¥ 
)
¥¥ 
;
¥¥ 
migrationBuilder
∂∂ 
.
∂∂ 
CreateIndex
∂∂ $
(
∂∂$ %
name
∑∑ 
:
∑∑ 
$str
∑∑ 
,
∑∑ 
table
∏∏ 
:
∏∏ 
$str
∏∏  
,
∏∏  !
column
ππ 
:
ππ 
$str
ππ %
)
ππ% &
;
ππ& '
migrationBuilder
ªª 
.
ªª 
CreateIndex
ªª $
(
ªª$ %
name
ºº 
:
ºº 
$str
ºº !
,
ºº! "
table
ΩΩ 
:
ΩΩ 
$str
ΩΩ  
,
ΩΩ  !
column
ææ 
:
ææ 
$str
ææ (
,
ææ( )
unique
øø 
:
øø 
true
øø 
,
øø 
filter
¿¿ 
:
¿¿ 
$str
¿¿ 6
)
¿¿6 7
;
¿¿7 8
}
¡¡ 
	protected
√√ 
override
√√ 
void
√√ 
Down
√√  
(
√√  !
MigrationBuilder
√√! 1
migrationBuilder
√√2 B
)
√√B C
{
ƒƒ 
migrationBuilder
≈≈ 
.
≈≈ 
	DropTable
≈≈ "
(
≈≈" #
name
∆∆ 
:
∆∆ 
$str
∆∆ $
)
∆∆$ %
;
∆∆% &
migrationBuilder
»» 
.
»» 
	DropTable
»» "
(
»»" #
name
…… 
:
…… 
$str
…… $
)
……$ %
;
……% &
migrationBuilder
ÀÀ 
.
ÀÀ 
	DropTable
ÀÀ "
(
ÀÀ" #
name
ÃÃ 
:
ÃÃ 
$str
ÃÃ $
)
ÃÃ$ %
;
ÃÃ% &
migrationBuilder
ŒŒ 
.
ŒŒ 
	DropTable
ŒŒ "
(
ŒŒ" #
name
œœ 
:
œœ 
$str
œœ #
)
œœ# $
;
œœ$ %
migrationBuilder
—— 
.
—— 
	DropTable
—— "
(
——" #
name
““ 
:
““ 
$str
““ $
)
““$ %
;
““% &
migrationBuilder
‘‘ 
.
‘‘ 
	DropTable
‘‘ "
(
‘‘" #
name
’’ 
:
’’ 
$str
’’ 
)
’’  
;
’’  !
migrationBuilder
◊◊ 
.
◊◊ 
	DropTable
◊◊ "
(
◊◊" #
name
ÿÿ 
:
ÿÿ 
$str
ÿÿ 
)
ÿÿ  
;
ÿÿ  !
}
ŸŸ 
}⁄⁄ ‡ 
u/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Identity/IdentityTokenClaimService.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Identity, 4
;4 5
public 
class %
IdentityTokenClaimService &
:' (
ITokenClaimsService) <
{ 
private 
readonly 
UserManager  
<  !
ApplicationUser! 0
>0 1
_userManager2 >
;> ?
public 
%
IdentityTokenClaimService $
($ %
UserManager% 0
<0 1
ApplicationUser1 @
>@ A
userManagerB M
)M N
{ 
_userManager 
= 
userManager "
;" #
} 
public 

async 
Task 
< 
string 
> 
GetTokenAsync +
(+ ,
string, 2
userName3 ;
); <
{ 
var 
tokenHandler 
= 
new #
JwtSecurityTokenHandler 6
(6 7
)7 8
;8 9
var 
key 
= 
Encoding 
. 
ASCII  
.  !
GetBytes! )
() *"
AuthorizationConstants* @
.@ A
JWT_SECRET_KEYA O
)O P
;P Q
var 
user 
= 
await 
_userManager %
.% &
FindByNameAsync& 5
(5 6
userName6 >
)> ?
;? @
if 

( 
user 
== 
null 
) 
throw 
new  #!
UserNotFoundException$ 9
(9 :
userName: B
)B C
;C D
var 
roles 
= 
await 
_userManager &
.& '
GetRolesAsync' 4
(4 5
user5 9
)9 :
;: ;
var 
claims 
= 
new 
List 
< 
Claim #
># $
{% &
new' *
Claim+ 0
(0 1

ClaimTypes1 ;
.; <
Name< @
,@ A
userNameB J
)J K
}L M
;M N
foreach   
(   
var   
role   
in   
roles   "
)  " #
{!! 	
claims"" 
."" 
Add"" 
("" 
new"" 
Claim""  
(""  !

ClaimTypes""! +
.""+ ,
Role"", 0
,""0 1
role""2 6
)""6 7
)""7 8
;""8 9
}## 	
var%% 
tokenDescriptor%% 
=%% 
new%% !#
SecurityTokenDescriptor%%" 9
{&& 	
Subject'' 
='' 
new'' 
ClaimsIdentity'' (
(''( )
claims'') /
.''/ 0
ToArray''0 7
(''7 8
)''8 9
)''9 :
,'': ;
Expires(( 
=(( 
DateTime(( 
.(( 
UtcNow(( %
.((% &
AddDays((& -
(((- .
$num((. /
)((/ 0
,((0 1
SigningCredentials)) 
=))  
new))! $
SigningCredentials))% 7
())7 8
new))8 ; 
SymmetricSecurityKey))< P
())P Q
key))Q T
)))T U
,))U V
SecurityAlgorithms))W i
.))i j
HmacSha256Signature))j }
)))} ~
}** 	
;**	 

var++ 
token++ 
=++ 
tokenHandler++  
.++  !
CreateToken++! ,
(++, -
tokenDescriptor++- <
)++< =
;++= >
return,, 
tokenHandler,, 
.,, 

WriteToken,, &
(,,& '
token,,' ,
),,, -
;,,- .
}-- 
}.. ¢
k/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Identity/ApplicationUser.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Identity, 4
;4 5
public 
class 
ApplicationUser 
: 
IdentityUser +
{ 
} Å
t/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Identity/AppIdentityDbContextSeed.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Identity, 4
;4 5
public 
class $
AppIdentityDbContextSeed %
{		 
public

 

static

 
async

 
Task

 
	SeedAsync

 &
(

& ' 
AppIdentityDbContext

' ;
identityDbContext

< M
,

M N
UserManager

O Z
<

Z [
ApplicationUser

[ j
>

j k
userManager

l w
,

w x
RoleManager	

y Ñ
<


Ñ Ö
IdentityRole


Ö ë
>


ë í
roleManager


ì û
)


û ü
{ 
if 

( 
identityDbContext 
. 
Database &
.& '
IsSqlServer' 2
(2 3
)3 4
)4 5
{ 	
identityDbContext 
. 
Database &
.& '
Migrate' .
(. /
)/ 0
;0 1
} 	
await 
roleManager 
. 
CreateAsync %
(% &
new& )
IdentityRole* 6
(6 7
BlazorShared7 C
.C D
AuthorizationD Q
.Q R
	ConstantsR [
.[ \
Roles\ a
.a b
ADMINISTRATORSb p
)p q
)q r
;r s
var 
defaultUser 
= 
new 
ApplicationUser -
{. /
UserName0 8
=9 :
$str; S
,S T
EmailU Z
=[ \
$str] u
}v w
;w x
await 
userManager 
. 
CreateAsync %
(% &
defaultUser& 1
,1 2"
AuthorizationConstants3 I
.I J
DEFAULT_PASSWORDJ Z
)Z [
;[ \
string 
adminUserName 
= 
$str 4
;4 5
var 
	adminUser 
= 
new 
ApplicationUser +
{, -
UserName. 6
=7 8
adminUserName9 F
,F G
EmailH M
=N O
adminUserNameP ]
}^ _
;_ `
await 
userManager 
. 
CreateAsync %
(% &
	adminUser& /
,/ 0"
AuthorizationConstants1 G
.G H
DEFAULT_PASSWORDH X
)X Y
;Y Z
	adminUser 
= 
await 
userManager %
.% &
FindByNameAsync& 5
(5 6
adminUserName6 C
)C D
;D E
if 

( 
	adminUser 
!= 
null 
) 
{ 	
await 
userManager 
. 
AddToRoleAsync ,
(, -
	adminUser- 6
,6 7
BlazorShared8 D
.D E
AuthorizationE R
.R S
	ConstantsS \
.\ ]
Roles] b
.b c
ADMINISTRATORSc q
)q r
;r s
} 	
} 
}   Ï
p/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Identity/AppIdentityDbContext.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Identity, 4
;4 5
public 
class  
AppIdentityDbContext !
:" #
IdentityDbContext$ 5
<5 6
ApplicationUser6 E
>E F
{ 
public		 
 
AppIdentityDbContext		 
(		  
DbContextOptions		  0
<		0 1 
AppIdentityDbContext		1 E
>		E F
options		G N
)		N O
:

 	
base


 
(

 
options

 
)

 
{ 
} 
	protected 
override 
void 
OnModelCreating +
(+ ,
ModelBuilder, 8
builder9 @
)@ A
{ 
base 
. 
OnModelCreating 
( 
builder $
)$ %
;% &
} 
} ”
_/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Dependencies.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
;+ ,
public		 
static		 
class		 
Dependencies		  
{

 
public 

static 
void 
ConfigureServices (
(( )
IConfiguration) 7
configuration8 E
,E F
IServiceCollectionG Y
servicesZ b
)b c
{ 
bool #
useOnlyInMemoryDatabase $
=% &
false' ,
;, -
if 

( 
configuration 
[ 
$str 3
]3 4
!=5 7
null8 <
)< =
{ 	#
useOnlyInMemoryDatabase #
=$ %
bool& *
.* +
Parse+ 0
(0 1
configuration1 >
[> ?
$str? X
]X Y
!Y Z
)Z [
;[ \
} 	
if 

( #
useOnlyInMemoryDatabase #
)# $
{ 	
services 
. 
AddDbContext !
<! "
CatalogContext" 0
>0 1
(1 2
c2 3
=>4 6
c 
. 
UseInMemoryDatabase $
($ %
$str% .
). /
)/ 0
;0 1
services 
. 
AddDbContext !
<! " 
AppIdentityDbContext" 6
>6 7
(7 8
options8 ?
=>@ B
options 
. 
UseInMemoryDatabase +
(+ ,
$str, 6
)6 7
)7 8
;8 9
} 	
else 
{ 	
services   
.   
AddDbContext   !
<  ! "
CatalogContext  " 0
>  0 1
(  1 2
c  2 3
=>  4 6
c!! 
.!! 
UseSqlServer!! 
(!! 
configuration!! ,
.!!, -
GetConnectionString!!- @
(!!@ A
$str!!A T
)!!T U
)!!U V
)!!V W
;!!W X
services$$ 
.$$ 
AddDbContext$$ !
<$$! " 
AppIdentityDbContext$$" 6
>$$6 7
($$7 8
options$$8 ?
=>$$@ B
options%% 
.%% 
UseSqlServer%% $
(%%$ %
configuration%%% 2
.%%2 3
GetConnectionString%%3 F
(%%F G
$str%%G [
)%%[ \
)%%\ ]
)%%] ^
;%%^ _
}&& 	
}'' 
}(( Í
r/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Data/Queries/BasketQueryService.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Data, 0
.0 1
Queries1 8
;8 9
public 
class 
BasketQueryService 
:  !
IBasketQueryService" 5
{		 
private

 
readonly

 
CatalogContext

 #

_dbContext

$ .
;

. /
public 

BasketQueryService 
( 
CatalogContext ,
	dbContext- 6
)6 7
{ 

_dbContext 
= 
	dbContext 
; 
} 
public 

async 
Task 
< 
int 
> !
CountTotalBasketItems 0
(0 1
string1 7
username8 @
)@ A
{ 
var 

totalItems 
= 
await 

_dbContext )
.) *
Baskets* 1
. 
Where 
( 
basket 
=> 
basket #
.# $
BuyerId$ +
==, .
username/ 7
)7 8
. 

SelectMany 
( 
item 
=> 
item  $
.$ %
Items% *
)* +
. 
SumAsync 
( 
sum 
=> 
sum  
.  !
Quantity! )
)) *
;* +
return 

totalItems 
; 
} 
} â;
Ç/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Data/Migrations/20211231093753_FixShipToAddress.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Data, 0
.0 1

Migrations1 ;
{ 
public 

partial 
class 
FixShipToAddress )
:* +
	Migration, 5
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str -
,- .
table 
: 
$str 
,  
type 
: 
$str $
,$ %
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
,  !

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldType 
: 
$str '
,' (
oldMaxLength 
: 
$num  
,  !
oldNullable 
: 
true !
)! "
;" #
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str ,
,, -
table 
: 
$str 
,  
type 
: 
$str %
,% &
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$str  
,  !

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldType 
: 
$str (
,( )
oldMaxLength   
:   
$num   !
,  ! "
oldNullable!! 
:!! 
true!! !
)!!! "
;!!" #
migrationBuilder## 
.## 
AlterColumn## (
<##( )
string##) /
>##/ 0
(##0 1
name$$ 
:$$ 
$str$$ -
,$$- .
table%% 
:%% 
$str%% 
,%%  
type&& 
:&& 
$str&& $
,&&$ %
	maxLength'' 
:'' 
$num'' 
,'' 
nullable(( 
:(( 
false(( 
,((  
defaultValue)) 
:)) 
$str))  
,))  !

oldClrType** 
:** 
typeof** "
(**" #
string**# )
)**) *
,*** +
oldType++ 
:++ 
$str++ '
,++' (
oldMaxLength,, 
:,, 
$num,,  
,,,  !
oldNullable-- 
:-- 
true-- !
)--! "
;--" #
migrationBuilder// 
.// 
AlterColumn// (
<//( )
string//) /
>/// 0
(//0 1
name00 
:00 
$str00 *
,00* +
table11 
:11 
$str11 
,11  
type22 
:22 
$str22 %
,22% &
	maxLength33 
:33 
$num33 
,33 
nullable44 
:44 
false44 
,44  
defaultValue55 
:55 
$str55  
,55  !

oldClrType66 
:66 
typeof66 "
(66" #
string66# )
)66) *
,66* +
oldType77 
:77 
$str77 (
,77( )
oldMaxLength88 
:88 
$num88 !
,88! "
oldNullable99 
:99 
true99 !
)99! "
;99" #
}:: 	
	protected<< 
override<< 
void<< 
Down<<  $
(<<$ %
MigrationBuilder<<% 5
migrationBuilder<<6 F
)<<F G
{== 	
migrationBuilder>> 
.>> 
AlterColumn>> (
<>>( )
string>>) /
>>>/ 0
(>>0 1
name?? 
:?? 
$str?? -
,??- .
table@@ 
:@@ 
$str@@ 
,@@  
typeAA 
:AA 
$strAA $
,AA$ %
	maxLengthBB 
:BB 
$numBB 
,BB 
nullableCC 
:CC 
trueCC 
,CC 

oldClrTypeDD 
:DD 
typeofDD "
(DD" #
stringDD# )
)DD) *
,DD* +
oldTypeEE 
:EE 
$strEE '
,EE' (
oldMaxLengthFF 
:FF 
$numFF  
)FF  !
;FF! "
migrationBuilderHH 
.HH 
AlterColumnHH (
<HH( )
stringHH) /
>HH/ 0
(HH0 1
nameII 
:II 
$strII ,
,II, -
tableJJ 
:JJ 
$strJJ 
,JJ  
typeKK 
:KK 
$strKK %
,KK% &
	maxLengthLL 
:LL 
$numLL 
,LL 
nullableMM 
:MM 
trueMM 
,MM 

oldClrTypeNN 
:NN 
typeofNN "
(NN" #
stringNN# )
)NN) *
,NN* +
oldTypeOO 
:OO 
$strOO (
,OO( )
oldMaxLengthPP 
:PP 
$numPP !
)PP! "
;PP" #
migrationBuilderRR 
.RR 
AlterColumnRR (
<RR( )
stringRR) /
>RR/ 0
(RR0 1
nameSS 
:SS 
$strSS -
,SS- .
tableTT 
:TT 
$strTT 
,TT  
typeUU 
:UU 
$strUU $
,UU$ %
	maxLengthVV 
:VV 
$numVV 
,VV 
nullableWW 
:WW 
trueWW 
,WW 

oldClrTypeXX 
:XX 
typeofXX "
(XX" #
stringXX# )
)XX) *
,XX* +
oldTypeYY 
:YY 
$strYY '
,YY' (
oldMaxLengthZZ 
:ZZ 
$numZZ  
)ZZ  !
;ZZ! "
migrationBuilder\\ 
.\\ 
AlterColumn\\ (
<\\( )
string\\) /
>\\/ 0
(\\0 1
name]] 
:]] 
$str]] *
,]]* +
table^^ 
:^^ 
$str^^ 
,^^  
type__ 
:__ 
$str__ %
,__% &
	maxLength`` 
:`` 
$num`` 
,`` 
nullableaa 
:aa 
trueaa 
,aa 

oldClrTypebb 
:bb 
typeofbb "
(bb" #
stringbb# )
)bb) *
,bb* +
oldTypecc 
:cc 
$strcc (
,cc( )
oldMaxLengthdd 
:dd 
$numdd !
)dd! "
;dd" #
}ee 	
}ff 
}gg Ã
|/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Data/Migrations/20211026175614_FixBuyerId.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Data, 0
.0 1

Migrations1 ;
;; <
public 
partial 
class 

FixBuyerId 
:  !
	Migration" +
{ 
	protected 
override 
void 
Up 
( 
MigrationBuilder /
migrationBuilder0 @
)@ A
{ 
migrationBuilder		 
.		 
AlterColumn		 $
<		$ %
string		% +
>		+ ,
(		, -
name

 
:

 
$str

 
,

 
table 
: 
$str 
, 
type 
: 
$str !
,! "
	maxLength 
: 
$num 
, 
nullable 
: 
false 
, 
defaultValue 
: 
$str 
, 

oldClrType 
: 
typeof 
( 
string %
)% &
,& '
oldType 
: 
$str $
,$ %
oldNullable 
: 
true 
) 
; 
migrationBuilder 
. 
AlterColumn $
<$ %
string% +
>+ ,
(, -
name 
: 
$str 
, 
table 
: 
$str 
, 
type 
: 
$str !
,! "
	maxLength 
: 
$num 
, 
nullable 
: 
false 
, 

oldClrType 
: 
typeof 
( 
string %
)% &
,& '
oldType 
: 
$str #
,# $
oldMaxLength 
: 
$num 
) 
; 
} 
	protected 
override 
void 
Down  
(  !
MigrationBuilder! 1
migrationBuilder2 B
)B C
{   
migrationBuilder!! 
.!! 
AlterColumn!! $
<!!$ %
string!!% +
>!!+ ,
(!!, -
name"" 
:"" 
$str"" 
,"" 
table## 
:## 
$str## 
,## 
type$$ 
:$$ 
$str$$ !
,$$! "
nullable%% 
:%% 
true%% 
,%% 

oldClrType&& 
:&& 
typeof&& 
(&& 
string&& %
)&&% &
,&&& '
oldType'' 
:'' 
$str'' $
,''$ %
oldMaxLength(( 
:(( 
$num(( 
)(( 
;(( 
migrationBuilder** 
.** 
AlterColumn** $
<**$ %
string**% +
>**+ ,
(**, -
name++ 
:++ 
$str++ 
,++ 
table,, 
:,, 
$str,, 
,,, 
type-- 
:-- 
$str--  
,--  !
	maxLength.. 
:.. 
$num.. 
,.. 
nullable// 
:// 
false// 
,// 

oldClrType00 
:00 
typeof00 
(00 
string00 %
)00% &
,00& '
oldType11 
:11 
$str11 $
,11$ %
oldMaxLength22 
:22 
$num22 
)22 
;22 
}33 
}44 Û¥
~/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Data/Migrations/20201202111507_InitialModel.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Data, 0
.0 1

Migrations1 ;
;; <
public 
partial 
class 
InitialModel !
:" #
	Migration$ -
{ 
	protected 
override 
void 
Up 
( 
MigrationBuilder /
migrationBuilder0 @
)@ A
{		 
migrationBuilder

 
.

 
CreateSequence

 '
(

' (
name 
: 
$str &
,& '
incrementBy 
: 
$num 
) 
; 
migrationBuilder 
. 
CreateSequence '
(' (
name 
: 
$str  
,  !
incrementBy 
: 
$num 
) 
; 
migrationBuilder 
. 
CreateSequence '
(' (
name 
: 
$str %
,% &
incrementBy 
: 
$num 
) 
; 
migrationBuilder 
. 
CreateTable $
($ %
name 
: 
$str 
, 
columns 
: 
table 
=> 
new !
{ 
Id 
= 
table 
. 
Column !
<! "
int" %
>% &
(& '
type' +
:+ ,
$str- 2
,2 3
nullable4 <
:< =
false> C
)C D
. 

Annotation 
(  
$str  4
,4 5
$str6 <
)< =
,= >
BuyerId 
= 
table 
.  
Column  &
<& '
string' -
>- .
(. /
type/ 3
:3 4
$str5 C
,C D
	maxLengthE N
:N O
$numP R
,R S
nullableT \
:\ ]
false^ c
)c d
} 
, 
constraints 
: 
table 
=> !
{ 
table   
.   

PrimaryKey    
(    !
$str  ! -
,  - .
x  / 0
=>  1 3
x  4 5
.  5 6
Id  6 8
)  8 9
;  9 :
}!! 
)!! 
;!! 
migrationBuilder## 
.## 
CreateTable## $
(##$ %
name$$ 
:$$ 
$str$$ !
,$$! "
columns%% 
:%% 
table%% 
=>%% 
new%% !
{&& 
Id'' 
='' 
table'' 
.'' 
Column'' !
<''! "
int''" %
>''% &
(''& '
type''' +
:''+ ,
$str''- 2
,''2 3
nullable''4 <
:''< =
false''> C
)''C D
,''D E
Brand(( 
=(( 
table(( 
.(( 
Column(( $
<(($ %
string((% +
>((+ ,
(((, -
type((- 1
:((1 2
$str((3 B
,((B C
	maxLength((D M
:((M N
$num((O R
,((R S
nullable((T \
:((\ ]
false((^ c
)((c d
})) 
,)) 
constraints** 
:** 
table** 
=>** !
{++ 
table,, 
.,, 

PrimaryKey,,  
(,,  !
$str,,! 3
,,,3 4
x,,5 6
=>,,7 9
x,,: ;
.,,; <
Id,,< >
),,> ?
;,,? @
}-- 
)-- 
;-- 
migrationBuilder// 
.// 
CreateTable// $
(//$ %
name00 
:00 
$str00  
,00  !
columns11 
:11 
table11 
=>11 
new11 !
{22 
Id33 
=33 
table33 
.33 
Column33 !
<33! "
int33" %
>33% &
(33& '
type33' +
:33+ ,
$str33- 2
,332 3
nullable334 <
:33< =
false33> C
)33C D
,33D E
Type44 
=44 
table44 
.44 
Column44 #
<44# $
string44$ *
>44* +
(44+ ,
type44, 0
:440 1
$str442 A
,44A B
	maxLength44C L
:44L M
$num44N Q
,44Q R
nullable44S [
:44[ \
false44] b
)44b c
}55 
,55 
constraints66 
:66 
table66 
=>66 !
{77 
table88 
.88 

PrimaryKey88  
(88  !
$str88! 2
,882 3
x884 5
=>886 8
x889 :
.88: ;
Id88; =
)88= >
;88> ?
}99 
)99 
;99 
migrationBuilder;; 
.;; 
CreateTable;; $
(;;$ %
name<< 
:<< 
$str<< 
,<< 
columns== 
:== 
table== 
=>== 
new== !
{>> 
Id?? 
=?? 
table?? 
.?? 
Column?? !
<??! "
int??" %
>??% &
(??& '
type??' +
:??+ ,
$str??- 2
,??2 3
nullable??4 <
:??< =
false??> C
)??C D
.@@ 

Annotation@@ 
(@@  
$str@@  4
,@@4 5
$str@@6 <
)@@< =
,@@= >
BuyerIdAA 
=AA 
tableAA 
.AA  
ColumnAA  &
<AA& '
stringAA' -
>AA- .
(AA. /
typeAA/ 3
:AA3 4
$strAA5 D
,AAD E
nullableAAF N
:AAN O
trueAAP T
)AAT U
,AAU V
	OrderDateBB 
=BB 
tableBB !
.BB! "
ColumnBB" (
<BB( )
DateTimeOffsetBB) 7
>BB7 8
(BB8 9
typeBB9 =
:BB= >
$strBB? O
,BBO P
nullableBBQ Y
:BBY Z
falseBB[ `
)BB` a
,BBa b 
ShipToAddress_StreetCC $
=CC% &
tableCC' ,
.CC, -
ColumnCC- 3
<CC3 4
stringCC4 :
>CC: ;
(CC; <
typeCC< @
:CC@ A
$strCCB Q
,CCQ R
	maxLengthCCS \
:CC\ ]
$numCC^ a
,CCa b
nullableCCc k
:CCk l
trueCCm q
)CCq r
,CCr s
ShipToAddress_CityDD "
=DD# $
tableDD% *
.DD* +
ColumnDD+ 1
<DD1 2
stringDD2 8
>DD8 9
(DD9 :
typeDD: >
:DD> ?
$strDD@ O
,DDO P
	maxLengthDDQ Z
:DDZ [
$numDD\ _
,DD_ `
nullableDDa i
:DDi j
trueDDk o
)DDo p
,DDp q
ShipToAddress_StateEE #
=EE$ %
tableEE& +
.EE+ ,
ColumnEE, 2
<EE2 3
stringEE3 9
>EE9 :
(EE: ;
typeEE; ?
:EE? @
$strEEA O
,EEO P
	maxLengthEEQ Z
:EEZ [
$numEE\ ^
,EE^ _
nullableEE` h
:EEh i
trueEEj n
)EEn o
,EEo p!
ShipToAddress_CountryFF %
=FF& '
tableFF( -
.FF- .
ColumnFF. 4
<FF4 5
stringFF5 ;
>FF; <
(FF< =
typeFF= A
:FFA B
$strFFC Q
,FFQ R
	maxLengthFFS \
:FF\ ]
$numFF^ `
,FF` a
nullableFFb j
:FFj k
trueFFl p
)FFp q
,FFq r!
ShipToAddress_ZipCodeGG %
=GG& '
tableGG( -
.GG- .
ColumnGG. 4
<GG4 5
stringGG5 ;
>GG; <
(GG< =
typeGG= A
:GGA B
$strGGC Q
,GGQ R
	maxLengthGGS \
:GG\ ]
$numGG^ `
,GG` a
nullableGGb j
:GGj k
trueGGl p
)GGp q
}HH 
,HH 
constraintsII 
:II 
tableII 
=>II !
{JJ 
tableKK 
.KK 

PrimaryKeyKK  
(KK  !
$strKK! ,
,KK, -
xKK. /
=>KK0 2
xKK3 4
.KK4 5
IdKK5 7
)KK7 8
;KK8 9
}LL 
)LL 
;LL 
migrationBuilderNN 
.NN 
CreateTableNN $
(NN$ %
nameOO 
:OO 
$strOO 
,OO  
columnsPP 
:PP 
tablePP 
=>PP 
newPP !
{QQ 
IdRR 
=RR 
tableRR 
.RR 
ColumnRR !
<RR! "
intRR" %
>RR% &
(RR& '
typeRR' +
:RR+ ,
$strRR- 2
,RR2 3
nullableRR4 <
:RR< =
falseRR> C
)RRC D
.SS 

AnnotationSS 
(SS  
$strSS  4
,SS4 5
$strSS6 <
)SS< =
,SS= >
	UnitPriceTT 
=TT 
tableTT !
.TT! "
ColumnTT" (
<TT( )
decimalTT) 0
>TT0 1
(TT1 2
typeTT2 6
:TT6 7
$strTT8 G
,TTG H
nullableTTI Q
:TTQ R
falseTTS X
)TTX Y
,TTY Z
QuantityUU 
=UU 
tableUU  
.UU  !
ColumnUU! '
<UU' (
intUU( +
>UU+ ,
(UU, -
typeUU- 1
:UU1 2
$strUU3 8
,UU8 9
nullableUU: B
:UUB C
falseUUD I
)UUI J
,UUJ K
CatalogItemIdVV 
=VV 
tableVV  %
.VV% &
ColumnVV& ,
<VV, -
intVV- 0
>VV0 1
(VV1 2
typeVV2 6
:VV6 7
$strVV8 =
,VV= >
nullableVV? G
:VVG H
falseVVI N
)VVN O
,VVO P
BasketIdWW 
=WW 
tableWW  
.WW  !
ColumnWW! '
<WW' (
intWW( +
>WW+ ,
(WW, -
typeWW- 1
:WW1 2
$strWW3 8
,WW8 9
nullableWW: B
:WWB C
falseWWD I
)WWI J
}XX 
,XX 
constraintsYY 
:YY 
tableYY 
=>YY !
{ZZ 
table[[ 
.[[ 

PrimaryKey[[  
([[  !
$str[[! 1
,[[1 2
x[[3 4
=>[[5 7
x[[8 9
.[[9 :
Id[[: <
)[[< =
;[[= >
table\\ 
.\\ 

ForeignKey\\  
(\\  !
name]] 
:]] 
$str]] ;
,]]; <
column^^ 
:^^ 
x^^ 
=>^^  
x^^! "
.^^" #
BasketId^^# +
,^^+ ,
principalTable__ "
:__" #
$str__$ -
,__- .
principalColumn`` #
:``# $
$str``% )
,``) *
onDeleteaa 
:aa 
ReferentialActionaa /
.aa/ 0
Cascadeaa0 7
)aa7 8
;aa8 9
}bb 
)bb 
;bb 
migrationBuilderdd 
.dd 
CreateTabledd $
(dd$ %
nameee 
:ee 
$stree 
,ee 
columnsff 
:ff 
tableff 
=>ff 
newff !
{gg 
Idhh 
=hh 
tablehh 
.hh 
Columnhh !
<hh! "
inthh" %
>hh% &
(hh& '
typehh' +
:hh+ ,
$strhh- 2
,hh2 3
nullablehh4 <
:hh< =
falsehh> C
)hhC D
,hhD E
Nameii 
=ii 
tableii 
.ii 
Columnii #
<ii# $
stringii$ *
>ii* +
(ii+ ,
typeii, 0
:ii0 1
$strii2 @
,ii@ A
	maxLengthiiB K
:iiK L
$numiiM O
,iiO P
nullableiiQ Y
:iiY Z
falseii[ `
)ii` a
,iia b
Descriptionjj 
=jj 
tablejj #
.jj# $
Columnjj$ *
<jj* +
stringjj+ 1
>jj1 2
(jj2 3
typejj3 7
:jj7 8
$strjj9 H
,jjH I
nullablejjJ R
:jjR S
truejjT X
)jjX Y
,jjY Z
Pricekk 
=kk 
tablekk 
.kk 
Columnkk $
<kk$ %
decimalkk% ,
>kk, -
(kk- .
typekk. 2
:kk2 3
$strkk4 C
,kkC D
nullablekkE M
:kkM N
falsekkO T
)kkT U
,kkU V

PictureUrill 
=ll 
tablell "
.ll" #
Columnll# )
<ll) *
stringll* 0
>ll0 1
(ll1 2
typell2 6
:ll6 7
$strll8 G
,llG H
nullablellI Q
:llQ R
truellS W
)llW X
,llX Y
CatalogTypeIdmm 
=mm 
tablemm  %
.mm% &
Columnmm& ,
<mm, -
intmm- 0
>mm0 1
(mm1 2
typemm2 6
:mm6 7
$strmm8 =
,mm= >
nullablemm? G
:mmG H
falsemmI N
)mmN O
,mmO P
CatalogBrandIdnn 
=nn  
tablenn! &
.nn& '
Columnnn' -
<nn- .
intnn. 1
>nn1 2
(nn2 3
typenn3 7
:nn7 8
$strnn9 >
,nn> ?
nullablenn@ H
:nnH I
falsennJ O
)nnO P
}oo 
,oo 
constraintspp 
:pp 
tablepp 
=>pp !
{qq 
tablerr 
.rr 

PrimaryKeyrr  
(rr  !
$strrr! -
,rr- .
xrr/ 0
=>rr1 3
xrr4 5
.rr5 6
Idrr6 8
)rr8 9
;rr9 :
tabless 
.ss 

ForeignKeyss  
(ss  !
namett 
:tt 
$strtt C
,ttC D
columnuu 
:uu 
xuu 
=>uu  
xuu! "
.uu" #
CatalogBrandIduu# 1
,uu1 2
principalTablevv "
:vv" #
$strvv$ 3
,vv3 4
principalColumnww #
:ww# $
$strww% )
,ww) *
onDeletexx 
:xx 
ReferentialActionxx /
.xx/ 0
Cascadexx0 7
)xx7 8
;xx8 9
tableyy 
.yy 

ForeignKeyyy  
(yy  !
namezz 
:zz 
$strzz A
,zzA B
column{{ 
:{{ 
x{{ 
=>{{  
x{{! "
.{{" #
CatalogTypeId{{# 0
,{{0 1
principalTable|| "
:||" #
$str||$ 2
,||2 3
principalColumn}} #
:}}# $
$str}}% )
,}}) *
onDelete~~ 
:~~ 
ReferentialAction~~ /
.~~/ 0
Cascade~~0 7
)~~7 8
;~~8 9
} 
) 
; 
migrationBuilder
ÅÅ 
.
ÅÅ 
CreateTable
ÅÅ $
(
ÅÅ$ %
name
ÇÇ 
:
ÇÇ 
$str
ÇÇ 
,
ÇÇ 
columns
ÉÉ 
:
ÉÉ 
table
ÉÉ 
=>
ÉÉ 
new
ÉÉ !
{
ÑÑ 
Id
ÖÖ 
=
ÖÖ 
table
ÖÖ 
.
ÖÖ 
Column
ÖÖ !
<
ÖÖ! "
int
ÖÖ" %
>
ÖÖ% &
(
ÖÖ& '
type
ÖÖ' +
:
ÖÖ+ ,
$str
ÖÖ- 2
,
ÖÖ2 3
nullable
ÖÖ4 <
:
ÖÖ< =
false
ÖÖ> C
)
ÖÖC D
.
ÜÜ 

Annotation
ÜÜ 
(
ÜÜ  
$str
ÜÜ  4
,
ÜÜ4 5
$str
ÜÜ6 <
)
ÜÜ< =
,
ÜÜ= >'
ItemOrdered_CatalogItemId
áá )
=
áá* +
table
áá, 1
.
áá1 2
Column
áá2 8
<
áá8 9
int
áá9 <
>
áá< =
(
áá= >
type
áá> B
:
ááB C
$str
ááD I
,
ááI J
nullable
ááK S
:
ááS T
true
ááU Y
)
ááY Z
,
ááZ [%
ItemOrdered_ProductName
àà '
=
àà( )
table
àà* /
.
àà/ 0
Column
àà0 6
<
àà6 7
string
àà7 =
>
àà= >
(
àà> ?
type
àà? C
:
ààC D
$str
ààE S
,
ààS T
	maxLength
ààU ^
:
àà^ _
$num
àà` b
,
ààb c
nullable
ààd l
:
ààl m
true
ààn r
)
ààr s
,
ààs t$
ItemOrdered_PictureUri
ââ &
=
ââ' (
table
ââ) .
.
ââ. /
Column
ââ/ 5
<
ââ5 6
string
ââ6 <
>
ââ< =
(
ââ= >
type
ââ> B
:
ââB C
$str
ââD S
,
ââS T
nullable
ââU ]
:
ââ] ^
true
ââ_ c
)
ââc d
,
ââd e
	UnitPrice
ää 
=
ää 
table
ää !
.
ää! "
Column
ää" (
<
ää( )
decimal
ää) 0
>
ää0 1
(
ää1 2
type
ää2 6
:
ää6 7
$str
ää8 G
,
ääG H
nullable
ääI Q
:
ääQ R
false
ääS X
)
ääX Y
,
ääY Z
Units
ãã 
=
ãã 
table
ãã 
.
ãã 
Column
ãã $
<
ãã$ %
int
ãã% (
>
ãã( )
(
ãã) *
type
ãã* .
:
ãã. /
$str
ãã0 5
,
ãã5 6
nullable
ãã7 ?
:
ãã? @
false
ããA F
)
ããF G
,
ããG H
OrderId
åå 
=
åå 
table
åå 
.
åå  
Column
åå  &
<
åå& '
int
åå' *
>
åå* +
(
åå+ ,
type
åå, 0
:
åå0 1
$str
åå2 7
,
åå7 8
nullable
åå9 A
:
ååA B
true
ååC G
)
ååG H
}
çç 
,
çç 
constraints
éé 
:
éé 
table
éé 
=>
éé !
{
èè 
table
êê 
.
êê 

PrimaryKey
êê  
(
êê  !
$str
êê! 0
,
êê0 1
x
êê2 3
=>
êê4 6
x
êê7 8
.
êê8 9
Id
êê9 ;
)
êê; <
;
êê< =
table
ëë 
.
ëë 

ForeignKey
ëë  
(
ëë  !
name
íí 
:
íí 
$str
íí 8
,
íí8 9
column
ìì 
:
ìì 
x
ìì 
=>
ìì  
x
ìì! "
.
ìì" #
OrderId
ìì# *
,
ìì* +
principalTable
îî "
:
îî" #
$str
îî$ ,
,
îî, -
principalColumn
ïï #
:
ïï# $
$str
ïï% )
,
ïï) *
onDelete
ññ 
:
ññ 
ReferentialAction
ññ /
.
ññ/ 0
Restrict
ññ0 8
)
ññ8 9
;
ññ9 :
}
óó 
)
óó 
;
óó 
migrationBuilder
ôô 
.
ôô 
CreateIndex
ôô $
(
ôô$ %
name
öö 
:
öö 
$str
öö +
,
öö+ ,
table
õõ 
:
õõ 
$str
õõ  
,
õõ  !
column
úú 
:
úú 
$str
úú 
)
úú 
;
úú  
migrationBuilder
ûû 
.
ûû 
CreateIndex
ûû $
(
ûû$ %
name
üü 
:
üü 
$str
üü -
,
üü- .
table
†† 
:
†† 
$str
†† 
,
†† 
column
°° 
:
°° 
$str
°° $
)
°°$ %
;
°°% &
migrationBuilder
££ 
.
££ 
CreateIndex
££ $
(
££$ %
name
§§ 
:
§§ 
$str
§§ ,
,
§§, -
table
•• 
:
•• 
$str
•• 
,
•• 
column
¶¶ 
:
¶¶ 
$str
¶¶ #
)
¶¶# $
;
¶¶$ %
migrationBuilder
®® 
.
®® 
CreateIndex
®® $
(
®®$ %
name
©© 
:
©© 
$str
©© )
,
©©) *
table
™™ 
:
™™ 
$str
™™ 
,
™™  
column
´´ 
:
´´ 
$str
´´ 
)
´´ 
;
´´ 
}
¨¨ 
	protected
ÆÆ 
override
ÆÆ 
void
ÆÆ 
Down
ÆÆ  
(
ÆÆ  !
MigrationBuilder
ÆÆ! 1
migrationBuilder
ÆÆ2 B
)
ÆÆB C
{
ØØ 
migrationBuilder
∞∞ 
.
∞∞ 
	DropTable
∞∞ "
(
∞∞" #
name
±± 
:
±± 
$str
±± 
)
±±  
;
±±  !
migrationBuilder
≥≥ 
.
≥≥ 
	DropTable
≥≥ "
(
≥≥" #
name
¥¥ 
:
¥¥ 
$str
¥¥ 
)
¥¥ 
;
¥¥ 
migrationBuilder
∂∂ 
.
∂∂ 
	DropTable
∂∂ "
(
∂∂" #
name
∑∑ 
:
∑∑ 
$str
∑∑ 
)
∑∑ 
;
∑∑  
migrationBuilder
ππ 
.
ππ 
	DropTable
ππ "
(
ππ" #
name
∫∫ 
:
∫∫ 
$str
∫∫ 
)
∫∫ 
;
∫∫ 
migrationBuilder
ºº 
.
ºº 
	DropTable
ºº "
(
ºº" #
name
ΩΩ 
:
ΩΩ 
$str
ΩΩ !
)
ΩΩ! "
;
ΩΩ" #
migrationBuilder
øø 
.
øø 
	DropTable
øø "
(
øø" #
name
¿¿ 
:
¿¿ 
$str
¿¿  
)
¿¿  !
;
¿¿! "
migrationBuilder
¬¬ 
.
¬¬ 
	DropTable
¬¬ "
(
¬¬" #
name
√√ 
:
√√ 
$str
√√ 
)
√√ 
;
√√ 
migrationBuilder
≈≈ 
.
≈≈ 
DropSequence
≈≈ %
(
≈≈% &
name
∆∆ 
:
∆∆ 
$str
∆∆ &
)
∆∆& '
;
∆∆' (
migrationBuilder
»» 
.
»» 
DropSequence
»» %
(
»»% &
name
…… 
:
…… 
$str
……  
)
……  !
;
……! "
migrationBuilder
ÀÀ 
.
ÀÀ 
DropSequence
ÀÀ %
(
ÀÀ% &
name
ÃÃ 
:
ÃÃ 
$str
ÃÃ %
)
ÃÃ% &
;
ÃÃ& '
}
ÕÕ 
}ŒŒ ƒ

`/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Data/FileItem.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Data, 0
;0 1
public 
class 
FileItem 
{ 
public 

string 
? 
FileName 
{ 
get !
;! "
set# &
;& '
}( )
public 

string 
? 
Url 
{ 
get 
; 
set !
;! "
}# $
public 

long 
Size 
{ 
get 
; 
set 
;  
}! "
public 

string 
? 
Ext 
{ 
get 
; 
set !
;! "
}# $
public		 

string		 
?		 
Type		 
{		 
get		 
;		 
set		 "
;		" #
}		$ %
public

 

string

 
?

 

DataBase64

 
{

 
get

  #
;

# $
set

% (
;

( )
}

* +
} Ä
d/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Data/EfRepository.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Data, 0
;0 1
public 
class 
EfRepository 
< 
T 
> 
: 
RepositoryBase -
<- .
T. /
>/ 0
,0 1
IReadRepository2 A
<A B
TB C
>C D
,D E
IRepositoryF Q
<Q R
TR S
>S T
whereU Z
T[ \
:] ^
class_ d
,d e
IAggregateRootf t
{ 
public 

EfRepository 
( 
CatalogContext &
	dbContext' 0
)0 1
:2 3
base4 8
(8 9
	dbContext9 B
)B C
{		 
}

 
} ©
u/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Data/Config/OrderItemConfiguration.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Data, 0
.0 1
Config1 7
;7 8
public 
class "
OrderItemConfiguration #
:$ %$
IEntityTypeConfiguration& >
<> ?
	OrderItem? H
>H I
{ 
public		 

void		 
	Configure		 
(		 
EntityTypeBuilder		 +
<		+ ,
	OrderItem		, 5
>		5 6
builder		7 >
)		> ?
{

 
builder 
. 
OwnsOne 
( 
i 
=> 
i 
. 
ItemOrdered *
,* +
io, .
=>/ 1
{ 	
io 
. 
	WithOwner 
( 
) 
; 
io 
. 
Property 
( 
cio 
=> 
cio "
." #
ProductName# .
). /
. 
HasMaxLength 
( 
$num  
)  !
. 

IsRequired 
( 
) 
; 
} 	
)	 

;
 
builder 
. 
Property 
( 
oi 
=> 
oi !
.! "
	UnitPrice" +
)+ ,
. 

IsRequired 
( 
true 
) 
. 
HasColumnType 
( 
$str *
)* +
;+ ,
} 
} ˆ
q/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Data/Config/OrderConfiguration.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Data, 0
.0 1
Config1 7
;7 8
public 
class 
OrderConfiguration 
:  !$
IEntityTypeConfiguration" :
<: ;
Order; @
>@ A
{ 
public		 

void		 
	Configure		 
(		 
EntityTypeBuilder		 +
<		+ ,
Order		, 1
>		1 2
builder		3 :
)		: ;
{

 
var 

navigation 
= 
builder  
.  !
Metadata! )
.) *
FindNavigation* 8
(8 9
nameof9 ?
(? @
Order@ E
.E F

OrderItemsF P
)P Q
)Q R
;R S

navigation 
? 
. !
SetPropertyAccessMode )
() *
PropertyAccessMode* <
.< =
Field= B
)B C
;C D
builder 
. 
Property 
( 
b 
=> 
b 
.  
BuyerId  '
)' (
. 

IsRequired 
( 
) 
. 
HasMaxLength 
( 
$num 
) 
; 
builder 
. 
OwnsOne 
( 
o 
=> 
o 
. 
ShipToAddress ,
,, -
a. /
=>0 2
{ 	
a 
. 
	WithOwner 
( 
) 
; 
a 
. 
Property 
( 
a 
=> 
a 
. 
ZipCode %
)% &
. 
HasMaxLength 
( 
$num  
)  !
. 

IsRequired 
( 
) 
; 
a 
. 
Property 
( 
a 
=> 
a 
. 
Street $
)$ %
. 
HasMaxLength 
( 
$num !
)! "
. 

IsRequired 
( 
) 
; 
a 
. 
Property 
( 
a 
=> 
a 
. 
State #
)# $
.   
HasMaxLength   
(   
$num    
)    !
;  ! "
a"" 
."" 
Property"" 
("" 
a"" 
=>"" 
a"" 
."" 
Country"" %
)""% &
.## 
HasMaxLength## 
(## 
$num##  
)##  !
.$$ 

IsRequired$$ 
($$ 
)$$ 
;$$ 
a&& 
.&& 
Property&& 
(&& 
a&& 
=>&& 
a&& 
.&& 
City&& "
)&&" #
.'' 
HasMaxLength'' 
('' 
$num'' !
)''! "
.(( 

IsRequired(( 
((( 
)(( 
;(( 
})) 	
)))	 

;))
 
builder++ 
.++ 

Navigation++ 
(++ 
x++ 
=>++ 
x++  !
.++! "
ShipToAddress++" /
)++/ 0
.++0 1

IsRequired++1 ;
(++; <
)++< =
;++= >
},, 
}-- ÷
w/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Data/Config/CatalogTypeConfiguration.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Data, 0
.0 1
Config1 7
;7 8
public 
class $
CatalogTypeConfiguration %
:& '$
IEntityTypeConfiguration( @
<@ A
CatalogTypeA L
>L M
{ 
public		 

void		 
	Configure		 
(		 
EntityTypeBuilder		 +
<		+ ,
CatalogType		, 7
>		7 8
builder		9 @
)		@ A
{

 
builder 
. 
HasKey 
( 
ci 
=> 
ci 
.  
Id  "
)" #
;# $
builder 
. 
Property 
( 
ci 
=> 
ci !
.! "
Id" $
)$ %
. 
UseHiLo 
( 
$str '
)' (
. 

IsRequired 
( 
) 
; 
builder 
. 
Property 
( 
cb 
=> 
cb !
.! "
Type" &
)& '
. 

IsRequired 
( 
) 
. 
HasMaxLength 
( 
$num 
) 
; 
} 
} Ú
w/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Data/Config/CatalogItemConfiguration.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Data, 0
.0 1
Config1 7
;7 8
public 
class $
CatalogItemConfiguration %
:& '$
IEntityTypeConfiguration( @
<@ A
CatalogItemA L
>L M
{ 
public		 

void		 
	Configure		 
(		 
EntityTypeBuilder		 +
<		+ ,
CatalogItem		, 7
>		7 8
builder		9 @
)		@ A
{

 
builder 
. 
ToTable 
( 
$str !
)! "
;" #
builder 
. 
Property 
( 
ci 
=> 
ci !
.! "
Id" $
)$ %
. 
UseHiLo 
( 
$str #
)# $
. 

IsRequired 
( 
) 
; 
builder 
. 
Property 
( 
ci 
=> 
ci !
.! "
Name" &
)& '
. 

IsRequired 
( 
true 
) 
. 
HasMaxLength 
( 
$num 
) 
; 
builder 
. 
Property 
( 
ci 
=> 
ci !
.! "
Price" '
)' (
. 

IsRequired 
( 
true 
) 
. 
HasColumnType 
( 
$str *
)* +
;+ ,
builder 
. 
Property 
( 
ci 
=> 
ci !
.! "

PictureUri" ,
), -
. 

IsRequired 
( 
false 
) 
; 
builder 
. 
HasOne 
( 
ci 
=> 
ci 
.  
CatalogBrand  ,
), -
. 
WithMany 
( 
) 
. 
HasForeignKey 
( 
ci 
=>  
ci! #
.# $
CatalogBrandId$ 2
)2 3
;3 4
builder   
.   
HasOne   
(   
ci   
=>   
ci   
.    
CatalogType    +
)  + ,
.!! 
WithMany!! 
(!! 
)!! 
."" 
HasForeignKey"" 
("" 
ci"" 
=>""  
ci""! #
.""# $
CatalogTypeId""$ 1
)""1 2
;""2 3
}## 
}$$ €
x/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Data/Config/CatalogBrandConfiguration.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Data, 0
.0 1
Config1 7
;7 8
public 
class %
CatalogBrandConfiguration &
:' ($
IEntityTypeConfiguration) A
<A B
CatalogBrandB N
>N O
{ 
public		 

void		 
	Configure		 
(		 
EntityTypeBuilder		 +
<		+ ,
CatalogBrand		, 8
>		8 9
builder		: A
)		A B
{

 
builder 
. 
HasKey 
( 
ci 
=> 
ci 
.  
Id  "
)" #
;# $
builder 
. 
Property 
( 
ci 
=> 
ci !
.! "
Id" $
)$ %
. 
UseHiLo 
( 
$str (
)( )
. 

IsRequired 
( 
) 
; 
builder 
. 
Property 
( 
cb 
=> 
cb !
.! "
Brand" '
)' (
. 

IsRequired 
( 
) 
. 
HasMaxLength 
( 
$num 
) 
; 
} 
} Á
v/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Data/Config/BasketItemConfiguration.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Data, 0
.0 1
Config1 7
;7 8
public 
class #
BasketItemConfiguration $
:% &$
IEntityTypeConfiguration' ?
<? @

BasketItem@ J
>J K
{ 
public		 

void		 
	Configure		 
(		 
EntityTypeBuilder		 +
<		+ ,

BasketItem		, 6
>		6 7
builder		8 ?
)		? @
{

 
builder 
. 
Property 
( 
bi 
=> 
bi !
.! "
	UnitPrice" +
)+ ,
. 

IsRequired 
( 
true 
) 
. 
HasColumnType 
( 
$str *
)* +
;+ ,
} 
} ∫
r/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Data/Config/BasketConfiguration.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Data, 0
.0 1
Config1 7
;7 8
public 
class 
BasketConfiguration  
:! "$
IEntityTypeConfiguration# ;
<; <
Basket< B
>B C
{ 
public		 

void		 
	Configure		 
(		 
EntityTypeBuilder		 +
<		+ ,
Basket		, 2
>		2 3
builder		4 ;
)		; <
{

 
var 

navigation 
= 
builder  
.  !
Metadata! )
.) *
FindNavigation* 8
(8 9
nameof9 ?
(? @
Basket@ F
.F G
ItemsG L
)L M
)M N
;N O

navigation 
? 
. !
SetPropertyAccessMode )
() *
PropertyAccessMode* <
.< =
Field= B
)B C
;C D
builder 
. 
Property 
( 
b 
=> 
b 
.  
BuyerId  '
)' (
. 

IsRequired 
( 
) 
. 
HasMaxLength 
( 
$num 
) 
; 
} 
} ˙B
j/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Data/CatalogContextSeed.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Data, 0
;0 1
public

 
class

 
CatalogContextSeed

 
{ 
public 

static 
async 
Task 
	SeedAsync &
(& '
CatalogContext' 5
catalogContext6 D
,D E
ILogger 
logger 
, 
int 
retry 
= 
$num 
) 
{ 
var  
retryForAvailability  
=! "
retry# (
;( )
try 
{ 	
if 
( 
catalogContext 
. 
Database '
.' (
IsSqlServer( 3
(3 4
)4 5
)5 6
{ 
catalogContext 
. 
Database '
.' (
Migrate( /
(/ 0
)0 1
;1 2
} 
if 
( 
! 
await 
catalogContext %
.% &
CatalogBrands& 3
.3 4
AnyAsync4 <
(< =
)= >
)> ?
{ 
await 
catalogContext $
.$ %
CatalogBrands% 2
.2 3
AddRangeAsync3 @
(@ A)
GetPreconfiguredCatalogBrands 1
(1 2
)2 3
)3 4
;4 5
await 
catalogContext $
.$ %
SaveChangesAsync% 5
(5 6
)6 7
;7 8
} 
if   
(   
!   
await   
catalogContext   %
.  % &
CatalogTypes  & 2
.  2 3
AnyAsync  3 ;
(  ; <
)  < =
)  = >
{!! 
await"" 
catalogContext"" $
.""$ %
CatalogTypes""% 1
.""1 2
AddRangeAsync""2 ?
(""? @(
GetPreconfiguredCatalogTypes## 0
(##0 1
)##1 2
)##2 3
;##3 4
await%% 
catalogContext%% $
.%%$ %
SaveChangesAsync%%% 5
(%%5 6
)%%6 7
;%%7 8
}&& 
if(( 
((( 
!(( 
await(( 
catalogContext(( %
.((% &
CatalogItems((& 2
.((2 3
AnyAsync((3 ;
(((; <
)((< =
)((= >
{)) 
await** 
catalogContext** $
.**$ %
CatalogItems**% 1
.**1 2
AddRangeAsync**2 ?
(**? @!
GetPreconfiguredItems++ )
(++) *
)++* +
)+++ ,
;++, -
await-- 
catalogContext-- $
.--$ %
SaveChangesAsync--% 5
(--5 6
)--6 7
;--7 8
}.. 
}// 	
catch00 
(00 
	Exception00 
ex00 
)00 
{11 	
if22 
(22  
retryForAvailability22 $
>=22% '
$num22( *
)22* +
throw22, 1
;221 2 
retryForAvailability44  
++44  "
;44" #
logger66 
.66 
LogError66 
(66 
ex66 
.66 
Message66 &
)66& '
;66' (
await77 
	SeedAsync77 
(77 
catalogContext77 *
,77* +
logger77, 2
,772 3 
retryForAvailability774 H
)77H I
;77I J
throw88 
;88 
}99 	
}:: 
static<< 

IEnumerable<< 
<<< 
CatalogBrand<< #
><<# $)
GetPreconfiguredCatalogBrands<<% B
(<<B C
)<<C D
{== 
return>> 
new>> 
List>> 
<>> 
CatalogBrand>> $
>>>$ %
{?? 
new@@ 
(@@ 
$str@@ 
)@@ 
,@@ 
newAA 
(AA 
$strAA 
)AA 
,AA 
newBB 
(BB 
$strBB #
)BB# $
,BB$ %
newCC 
(CC 
$strCC  
)CC  !
,CC! "
newDD 
(DD 
$strDD 
)DD 
}EE 
;EE 
}FF 
staticHH 

IEnumerableHH 
<HH 
CatalogTypeHH "
>HH" #(
GetPreconfiguredCatalogTypesHH$ @
(HH@ A
)HHA B
{II 
returnJJ 
newJJ 
ListJJ 
<JJ 
CatalogTypeJJ #
>JJ# $
{KK 
newLL 
(LL 
$strLL 
)LL 
,LL 
newMM 
(MM 
$strMM 
)MM 
,MM 
newNN 
(NN 
$strNN 
)NN 
,NN 
newOO 
(OO 
$strOO &
)OO& '
}PP 
;PP 
}QQ 
staticSS 

IEnumerableSS 
<SS 
CatalogItemSS "
>SS" #!
GetPreconfiguredItemsSS$ 9
(SS9 :
)SS: ;
{TT 
returnUU 
newUU 
ListUU 
<UU 
CatalogItemUU #
>UU# $
{VV 
newWW 
(WW 
$numWW 
,WW 
$numWW 
,WW 
$strWW 4
,WW4 5
$strWW6 Q
,WWQ R
$numWWS X
,WWX Y
$str	WW[ î
)
WWî ï
,
WWï ñ
newXX 
(XX 
$numXX 
,XX 
$numXX 
,XX 
$strXX 1
,XX1 2
$strXX3 K
,XXK L
$numXXM R
,XXR S
$str	XXT ç
)
XXç é
,
XXé è
newYY 
(YY 
$numYY 
,YY 
$numYY 
,YY 
$strYY .
,YY. /
$strYY0 E
,YYE F
$numYYG I
,YYI J
$str	YYL Ö
)
YYÖ Ü
,
YYÜ á
newZZ 
(ZZ 
$numZZ 
,ZZ 
$numZZ 
,ZZ 
$strZZ 5
,ZZ5 6
$strZZ7 S
,ZZS T
$numZZU W
,ZZW X
$str	ZZY í
)
ZZí ì
,
ZZì î
new[[ 
([[ 
$num[[ 
,[[ 
$num[[ 
,[[ 
$str[[ +
,[[+ ,
$str[[- ?
,[[? @
$num[[A E
,[[E F
$str	[[G Ä
)
[[Ä Å
,
[[Å Ç
new\\ 
(\\ 
$num\\ 
,\\ 
$num\\ 
,\\ 
$str\\ /
,\\/ 0
$str\\1 G
,\\G H
$num\\I K
,\\K L
$str	\\M Ü
)
\\Ü á
,
\\á à
new]] 
(]] 
$num]] 
,]] 
$num]] 
,]] 
$str]] -
,]]- .
$str]]/ C
,]]C D
$num]]F H
,]]H I
$str	]]J É
)
]]É Ñ
,
]]Ñ Ö
new^^ 
(^^ 
$num^^ 
,^^ 
$num^^ 
,^^ 
$str^^ 1
,^^1 2
$str^^3 K
,^^K L
$num^^M Q
,^^Q R
$str	^^S å
)
^^å ç
,
^^ç é
new__ 
(__ 
$num__ 
,__ 
$num__ 
,__ 
$str__ +
,__+ ,
$str__- ?
,__? @
$num__A C
,__C D
$str__E ~
)__~ 
,	__ Ä
new`` 
(`` 
$num`` 
,`` 
$num`` 
,`` 
$str`` 0
,``0 1
$str``2 I
,``I J
$num``K M
,``M N
$str	``O â
)
``â ä
,
``ä ã
newaa 
(aa 
$numaa 
,aa 
$numaa 
,aa 
$straa '
,aa' (
$straa) 7
,aa7 8
$numaa9 =
,aa= >
$straa? y
)aay z
,aaz {
newbb 
(bb 
$numbb 
,bb 
$numbb 
,bb 
$strbb -
,bb- .
$strbb/ C
,bbC D
$numbbE G
,bbG H
$str	bbI É
)
bbÉ Ñ
}cc 
;cc 
}dd 
}ee ¨
f/Users/james.amable/Source Code/dotNet/eShopOnWeb/eShopOnWeb/src/Infrastructure/Data/CatalogContext.cs
	namespace 	
	Microsoft
 
. 
eShopWeb 
. 
Infrastructure +
.+ ,
Data, 0
;0 1
public		 
class		 
CatalogContext		 
:		 
	DbContext		 '
{

 
public 

CatalogContext 
( 
DbContextOptions *
<* +
CatalogContext+ 9
>9 :
options; B
)B C
:D E
baseF J
(J K
optionsK R
)R S
{T U
}U V
public 

DbSet 
< 
Basket 
> 
Baskets  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 

DbSet 
< 
CatalogItem 
> 
CatalogItems *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 

DbSet 
< 
CatalogBrand 
> 
CatalogBrands ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 

DbSet 
< 
CatalogType 
> 
CatalogTypes *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 

DbSet 
< 
Order 
> 
Orders 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

DbSet 
< 
	OrderItem 
> 

OrderItems &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 

DbSet 
< 

BasketItem 
> 
BasketItems (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
	protected 
override 
void 
OnModelCreating +
(+ ,
ModelBuilder, 8
builder9 @
)@ A
{ 
base 
. 
OnModelCreating 
( 
builder $
)$ %
;% &
builder 
. +
ApplyConfigurationsFromAssembly /
(/ 0
Assembly0 8
.8 9 
GetExecutingAssembly9 M
(M N
)N O
)O P
;P Q
} 
} 